import java.lang.String
var String remoteLastUpdate

rule "Hue Remote"
when
    Item Hue_Remote_Flur changed 
then
    logInfo("remote.rules", "Remote Test: " + Hue_Remote_Flur.state.toString)
    var String state = Hue_Remote_Flur.state.toString.split("-RMT-").get(0) 
    logInfo("remote.rules", "Remote Test: " + state)
    var String timestamp = "123"
    //timestamp = Hue_Remote_Flur.state.toString.split("-RMT-").get(0) as String
    logInfo("remote.rules", "Remote UPD: " + timestamp)
    logInfo("remote.rules", "Remote: " + state)
    if ( timestamp != remoteLastUpdate ) {
        switch state {
            case "1002": {
                logInfo("remote.rules", "Remote: On / Short")
                CL_WOHNZIMMER.sendCommand(100)
                OSRAM_KUECHE_STRIP.sendCommand("ON")
        	}
            case "1003": {
                logInfo("remote.rules", "Remote: On / Long")
                CL_WOHNZIMMER.sendCommand(20)
                HARMONY_APLTV.sendCommand("Home")
                HARMONY_HKAVR.sendCommand("PowerOn")
                HARMONY_LGTV.sendCommand("PowerOn")
        	}
			case "2002": {
                logInfo("remote.rules", "Remote: Dim up / Short")
            }
            case "2003": {
                logInfo("remote.rules", "Remote: Dim up / Long")

            }
			case "3002": {
                logInfo("remote.rules", "Remote: Dim down / Short")

            }
            case "3003": {
                logInfo("remote.rules", "Remote: Dim down / Long")
                var HSBType command = new HSBType(new DecimalType(0), new PercentType(100), new PercentType(20))
                CL_HUE_LS.sendCommand(command)
                CL_HUE_SZ.sendCommand(command)
            }
			case "4002": {
                logInfo("remote.rules", "Remote: Off / Short")
				CL_HUE_ALL.sendCommand("OFF")
                HARMONY_APLTV.sendCommand("Home")
                HARMONY_LGTV.sendCommand("PowerOff")
                HARMONY_HKAVR.sendCommand("PowerOff")
                HARMONY_HKAVR.sendCommand("PowerOff")
        	}
            case "4003": {
                logInfo("remote.rules", "Remote: Off / Long")
				CL_HUE_ALL.sendCommand("OFF")
                HARMONY_APLTV.sendCommand("Home")
                HARMONY_LGTV.sendCommand("PowerOff")
                HARMONY_HKAVR.sendCommand("PowerOff")
                HARMONY_HKAVR.sendCommand("PowerOff")
                SWITCH_ALARM_SYSTEM.sendCommand("ON")
        	}
        }
        remoteLastUpdate = timestamp
    }
end